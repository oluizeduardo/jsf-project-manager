<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">


<h:head>
	<title>Inicio</title>
	<h:outputStylesheet library="css" name="default.css" />
</h:head>

<h:body>

	<h:form>

		<p:growl id="messages" />

		<!-- BARRA DE MENU -->
		<ui:include src="barraDeMenu.xhtml" />

		<p:spacer height="8"/>

		<p:layout>

			<!-- PAINEL DE PERFIL -->
			<p:layoutUnit position="west" size="250">
				<h:panelGrid columns="1" width="200" style="margin:10px;">


					<!-- PAINEL DA FOTO -->
					<p:panel style="height:180px; width:205px;">
						<h:graphicImage value="/resources/images/user_default.png" height="170"
							width="170" />
					</p:panel>

					<p:outputLabel value="Luiz Eduardo da Costa"
								   style="font-size:25px;font-weight:bold;" />

					<p:spacer height="10px"/>

					<p:outputLabel value="Cachoeira de Minas/MG" 
								   style="font-size:14px;"/>
					<p:outputLabel value="costaeduardoluiz@gmail.com"
								   style="font-size:14px;"/>
					
					<p:spacer height="60"/>
					<p:outputLabel value="Progresso de atualização do perfil:" style="font-size:13px"/>
					<p:progressBar value="#{homeController.progressoDeAtualizacaoPerfil}" labelTemplate="{value}%" displayOnly="true"/>

				</h:panelGrid>
			</p:layoutUnit>


			<!-- PAINEL DE PROJETOS -->
			<p:layoutUnit position="center">


				<!-- PAINEL BASE -->
				<p:panel style="height:510px; margin:10px">


					<!-- BUSCA POR PROJETOS -->
					<h:form id="search-projects">
						<h:panelGrid columns="4" cellspacing="5">
							<p:inputText placeholder="Buscar Projetos..." 
										 style="width:460px"
										 value="#{homeController.palavraChave}" />

							<p:selectOneMenu value="#{homeController.onde}">
								<f:selectItem itemLabel="Onde" itemValue="Onde"
									noSelectionOption="true" />
								<f:selectItem itemLabel="Toda universidade"
									itemValue="Toda Universidade" />
								<f:selectItem itemLabel="Somente no meu curso"
									itemValue="Somente no meu curso" />
							</p:selectOneMenu>

							<p:selectOneMenu value="#{homeController.habilidade}">
								<f:selectItem itemLabel="Habilidade" itemValue="habilidade"
									noSelectionOption="true" />
								<f:selectItem itemLabel="Java" itemValue="Java" />
								<f:selectItem itemLabel="Banco de Dados"
									itemValue="Banco de Dados" />
							</p:selectOneMenu>

							<p:commandButton value="Buscar" 
											 icon="ui-icon-search" 
											 actionListener="#{homeController.pesquisarProjetos}"/>

						</h:panelGrid>

					</h:form>

					<p />


					<!-- PROJETOS LISTADOS -->
					<p:dataGrid var="projeto" value="#{homeController.projetoBean.projetos}"
						columns="2" rows="4" paginator="true"
						paginatorPosition="bottom"
						paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink}">


						<p:panel id="pnProjeto" header="#{projeto.titulo}"
							style="widht:300px; margin:5px">

							<f:facet name="actions">
								<p:commandLink
									styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default">
									<h:outputText styleClass="ui-icon ui-icon-grip-dotted-vertical"
										title="Clique e arraste" />
								</p:commandLink>
							</f:facet>


							<h:panelGrid columns="2">
								<p:graphicImage value="/resources/images/document.png" height="50" width="50" />
								<h:outputText value="#{projeto.descricaoCurta}" />
								<h:outputText value="Publicado em: #{projeto.dataPublicacao}"
											  style="font-size:12px" />


								<h:form>
									<!-- TELA DE CONFIRMAÇÃO DE CANDIDATURA -->
									<p:growl id="msg-confirm" showDetail="true" />

									
									<p:commandButton value="Detalhes" onclick="PF('project-details').show()"/>
									
									<p:spacer width="10px"/>
									
									<p:commandButton value="Candidatar" update="msg-confirm">
										<p:confirm header="Confirmação"
											message="Confirma que deseja se candidatar a este projeto?"
											icon="ui-icon-alert" />
									</p:commandButton>
																		

									<p:confirmDialog global="true" showEffect="fade"
										hideEffect="fade" closeOnEscape="true">
										<p:commandButton value="Sim" type="button"
											styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
										<p:commandButton value="Não" type="button"
											styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
									</p:confirmDialog>

								</h:form>

							</h:panelGrid>

						</p:panel>

						<p:draggable for="pnProjeto" revert="true" stack=".ui-panel" />

					</p:dataGrid>

				</p:panel>

			</p:layoutUnit>

		</p:layout>
	</h:form>
	
	
	
	<!-- DETALHES DO PROJETO -->
	<p:dialog modal="true" showEffect="fade" hideEffect="fade"
			  header="Detalhes do Projeto" widgetVar="project-details" 
			  resizable="false" closeOnEscape="true">
	
		<p:panel>
			<p:outputLabel value="Detalhes completo do projeto"/>
			<p:commandButton value="Candidatar">
				<div align="center">
					<p:confirm header="Confirmação"
					message="Confirma que deseja se candidatar a este projeto?"
					icon="ui-icon-alert" />
				</div>
			</p:commandButton>
		</p:panel>
	 
	</p:dialog>

</h:body>
</html>